# π“΅ ν•Έλ“μ‰μ΄ν¬ ν”„λ΅ν† μ½ (Handshake Protocol)

μ΄ ν”„λ΅μ νΈλ” **ν•Έλ“μ‰μ΄ν¬ ν”„λ΅ν† μ½**μ„ κµ¬ν„ν• κ²ƒμ…λ‹λ‹¤. μ΄ ν”„λ΅ν† μ½μ€ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ κ°„μ μ•μ „ν• ν†µμ‹ μ„ μ„ν•΄ μ‚¬μ©λλ©°, λ‹¤μ–‘ν• μ•”νΈν™” κΈ°λ²•κ³Ό λ³΄μ• κ²€μ¦μ„ ν¬ν•¨ν•κ³  μμµλ‹λ‹¤. λ³Έ ν”„λ΅μ νΈλ” **RSA** μ•”νΈν™” λ° **HMAC**(ν•΄μ‹ κΈ°λ° λ©”μ‹μ§€ μΈμ¦ μ½”λ“), **AES**λ¥Ό ν¬ν•¨ν• λ³µμ΅ν• λ³΄μ• κΈ°λ¥μ„ λ‹¤λ£Ήλ‹λ‹¤.

## π’΅ μ£Όμ” κΈ°λ¥

- **RSA μ•”νΈν™”**: κ³µκ°ν‚¤μ™€ κ°μΈν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ λ°μ΄ν„°λ¥Ό μ•”νΈν™”ν•κ³  λ³µνΈν™”ν•©λ‹λ‹¤.
- **HMAC κ²€μ¦**: λ©”μ‹μ§€μ λ¬΄κ²°μ„±μ„ ν™•μΈν•κΈ° μ„ν•΄ HMACμ„ μ‚¬μ©ν•μ—¬ λ°μ΄ν„°λ¥Ό κ²€μ¦ν•©λ‹λ‹¤.
- **AES μ•”νΈν™”**: λ€μΉ­ν‚¤ μ•”νΈν™”λ¥Ό μ‚¬μ©ν•μ—¬ λ©”μ‹μ§€λ¥Ό μ•μ „ν•κ² μ•”νΈν™”ν•©λ‹λ‹¤.
- **μ„λ²„-ν΄λΌμ΄μ–ΈνΈ ν†µμ‹ **: μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ κ°„μ μ•μ „ν• μ—°κ²°μ„ μ„ν• μ•”νΈν™”λ λ°μ΄ν„° μ „μ†΅.

## π€ μ‚¬μ© λ°©λ²•

### 1. ν™κ²½ μ„¤μ •

ν”„λ΅μ νΈμ— ν•„μ”ν• λΌμ΄λΈλ¬λ¦¬λ“¤μ΄ μμµλ‹λ‹¤. μ•„λμ™€ κ°™μ΄ μ„¤μΉν•΄ μ£Όμ„Έμ”.

- **OpenSSL**: μ•”νΈν™”μ™€ κ΄€λ ¨λ κΈ°λ¥μ„ μ κ³µν•λ” λΌμ΄λΈλ¬λ¦¬μ…λ‹λ‹¤.
- **json-c**: JSON λ°μ΄ν„°λ¥Ό μ²λ¦¬ν•κΈ° μ„ν• λΌμ΄λΈλ¬λ¦¬μ…λ‹λ‹¤.

λ¦¬λ…μ¤ ν™κ²½μ—μ„λ” λ‹¤μ λ…λ Ήμ–΄λ΅ ν•„μ”ν• λΌμ΄λΈλ¬λ¦¬λ“¤μ„ μ„¤μΉν•  μ μμµλ‹λ‹¤:

```bash
sudo apt-get install libssl-dev
sudo apt-get install libjson-c-dev
```

### 2. C ν”„λ΅κ·Έλ¨μ„ μ»΄νμΌν•©λ‹λ‹¤:
```bash
gcc -o handshake_client client.c -lssl -lcrypto -ljson-c
gcc -o handshake_server server.c -lssl -lcrypto -ljson-c
```

### 3. μ„λ²„ μ‹¤ν–‰
λ¨Όμ € μ„λ²„λ¥Ό μ‹¤ν–‰ν•©λ‹λ‹¤. μ„λ²„λ” ν΄λΌμ΄μ–ΈνΈμ μ—°κ²°μ„ κΈ°λ‹¤λ¦½λ‹λ‹¤.

```bash
./handshake_server [PORT]
```

### 4. ν΄λΌμ΄μ–ΈνΈ μ‹¤ν–‰
μ„λ²„κ°€ μ‹¤ν–‰λλ©΄, ν΄λΌμ΄μ–ΈνΈλ” μ•„λ λ…λ Ήμ–΄λ΅ μ„λ²„μ— μ—°κ²°ν•μ—¬ ν•Έλ“μ‰μ΄ν¬λ¥Ό μ‹μ‘ν•  μ μμµλ‹λ‹¤.

```
./handshake_client [SERVER_IP] [PORT]
```

### 5. λ™μ‘ μ„¤λ…
ν΄λΌμ΄μ–ΈνΈλ” μ„λ²„μ™€ μ—°κ²°μ„ μ‹λ„ν•κ³ , RSA κ³µκ°ν‚¤λ¥Ό λ°›μ•„μµλ‹λ‹¤.
ν΄λΌμ΄μ–ΈνΈλ” RSAλ¥Ό μ‚¬μ©ν•μ—¬ λ©”μ‹μ§€λ¥Ό μ•”νΈν™”ν•κ³ , μ„λ²„λ΅ μ „μ†΅ν•©λ‹λ‹¤.
μ„λ²„λ” λ°›μ€ λ©”μ‹μ§€λ¥Ό RSA κ°μΈν‚¤λ΅ λ³µνΈν™”ν•μ—¬ ν™•μΈν• ν›„, HMACμ„ μ‚¬μ©ν•΄ λ©”μ‹μ§€μ λ¬΄κ²°μ„±μ„ κ²€μ¦ν•©λ‹λ‹¤.
ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” μ„λ΅ AES μ•”νΈν™”λ¥Ό μ‚¬μ©ν•μ—¬ μ•μ „ν•κ² λ°μ΄ν„°λ¥Ό μ£Όκ³ λ°›μµλ‹λ‹¤.
μ–‘μΈ΅μ€ μ„λ΅μ μ•”νΈν™”λ λ©”μ‹μ§€λ¥Ό κ²€μ¦ν•κ³ , μ •μƒμ μΈ μ—°κ²°μ΄ ν™•λ¦½λλ©΄ λ°μ΄ν„° ν†µμ‹ μ„ μ‹μ‘ν•©λ‹λ‹¤.


## π“ νμΌ κµ¬μ΅°

```bash
/handshake-protocol
β”β”€β”€ README.md           # ν”„λ΅μ νΈ μ„¤λ… νμΌ
β”β”€β”€ code/               # ν΄λΌμ΄μ–ΈνΈ λ° μ„λ²„ μ½”λ“ ν΄λ”
β”‚   β”β”€β”€ client.c        # ν΄λΌμ΄μ–ΈνΈ ν”„λ΅κ·Έλ¨
β”‚   β”β”€β”€ server.c        # μ„λ²„ ν”„λ΅κ·Έλ¨
β”β”€β”€ README.md           # code ν΄λ” μ„¤λ… νμΌ
β””β”€β”€ src/                # μ†μ¤ μ½”λ“ λ° λΌμ΄λΈλ¬λ¦¬
```


## β™οΈ μ½”λ“ μ„¤λ…
### 1. RSA μ•”νΈν™”
RSA_enc(): λ©”μ‹μ§€λ¥Ό RSA κ³µκ°ν‚¤λ΅ μ•”νΈν™”ν•©λ‹λ‹¤.
RSA_dec(): μ•”νΈν™”λ λ©”μ‹μ§€λ¥Ό RSA κ°μΈν‚¤λ΅ λ³µνΈν™”ν•©λ‹λ‹¤.
RSA_sign(): λ©”μ‹μ§€μ— λ””μ§€ν„Έ μ„λ…μ„ μ¶”κ°€ν•©λ‹λ‹¤.
RSA_verify(): λ””μ§€ν„Έ μ„λ…μ„ κ²€μ¦ν•©λ‹λ‹¤.

### 2. HMAC
HMACλ” SHA256 ν•΄μ‹ ν•¨μμ™€ κ²°ν•©λμ–΄ μ‚¬μ©λ©λ‹λ‹¤. λ©”μ‹μ§€μ λ¬΄κ²°μ„±μ„ λ³΄μ¥ν•λ©°, μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈκ°€ λ™μΌν• ν‚¤λ¥Ό κ³µμ ν•  μ μλ„λ΅ ν•©λ‹λ‹¤.

### 3. AES μ•”νΈν™”
AESλ” 128λΉ„νΈ ν‚¤λ¥Ό μ‚¬μ©ν•μ—¬ λ€μΉ­ν‚¤ μ•”νΈν™”λ¥Ό κµ¬ν„ν•©λ‹λ‹¤. μ•μ „ν• λ°μ΄ν„° μ „μ†΅μ„ μ„ν•΄ μ‚¬μ©λ©λ‹λ‹¤.

### 4. JSON μ „μ†΅
λ°μ΄ν„°λ” JSON ν•μ‹μΌλ΅ μ„λ²„μ™€ ν΄λΌμ΄μ–ΈνΈ κ°„μ— μ „μ†΅λ©λ‹λ‹¤. json-c λΌμ΄λΈλ¬λ¦¬λ¥Ό μ‚¬μ©ν•μ—¬ JSON κ°μ²΄λ¥Ό μƒμ„±ν•κ³  νμ‹±ν•©λ‹λ‹¤.

## π”‘ λ³΄μ• κ²€μ¦
ν•Έλ“μ‰μ΄ν¬κ°€ μ™„λ£λ ν›„, HMAC κ²€μ¦μ„ ν†µν•΄ λ°μ΄ν„°μ λ¬΄κ²°μ„±μ΄ ν™•μΈλ©λ‹λ‹¤. ν΄λΌμ΄μ–ΈνΈμ™€ μ„λ²„λ” κ°κ° μƒλ€λ°©μ λ©”μ‹μ§€λ¥Ό κ²€μ¦ν•μ—¬ μ•μ „ν• μ—°κ²°μ„ λ³΄μ¥ν•©λ‹λ‹¤.
