# 📡 핸드쉐이크 프로토콜 (Handshake Protocol)

이 프로젝트는 **핸드쉐이크 프로토콜**을 구현한 것입니다. 이 프로토콜은 서버와 클라이언트 간의 안전한 통신을 위해 사용되며, 다양한 암호화 기법과 보안 검증을 포함하고 있습니다. 본 프로젝트는 **RSA** 암호화 및 **HMAC**(해시 기반 메시지 인증 코드), **AES**를 포함한 복잡한 보안 기능을 다룹니다.

## 💡 주요 기능

- **RSA 암호화**: 공개키와 개인키를 사용하여 데이터를 암호화하고 복호화합니다.
- **HMAC 검증**: 메시지의 무결성을 확인하기 위해 HMAC을 사용하여 데이터를 검증합니다.
- **AES 암호화**: 대칭키 암호화를 사용하여 메시지를 안전하게 암호화합니다.
- **서버-클라이언트 통신**: 서버와 클라이언트 간의 안전한 연결을 위한 암호화된 데이터 전송.

## 🚀 사용 방법

### 1. 환경 설정

프로젝트에 필요한 라이브러리들이 있습니다. 아래와 같이 설치해 주세요.

- **OpenSSL**: 암호화와 관련된 기능을 제공하는 라이브러리입니다.
- **json-c**: JSON 데이터를 처리하기 위한 라이브러리입니다.

리눅스 환경에서는 다음 명령어로 필요한 라이브러리들을 설치할 수 있습니다:

```bash
sudo apt-get install libssl-dev
sudo apt-get install libjson-c-dev
```

### 2. C 프로그램을 컴파일합니다:
```bash
gcc -o handshake_client client.c -lssl -lcrypto -ljson-c
gcc -o handshake_server server.c -lssl -lcrypto -ljson-c
```

### 3. 서버 실행
먼저 서버를 실행합니다. 서버는 클라이언트의 연결을 기다립니다.

```bash
./handshake_server [PORT]
```

### 4. 클라이언트 실행
서버가 실행되면, 클라이언트는 아래 명령어로 서버에 연결하여 핸드쉐이크를 시작할 수 있습니다.

```
./handshake_client [SERVER_IP] [PORT]
```

### 5. 동작 설명
클라이언트는 서버와 연결을 시도하고, RSA 공개키를 받아옵니다.
클라이언트는 RSA를 사용하여 메시지를 암호화하고, 서버로 전송합니다.
서버는 받은 메시지를 RSA 개인키로 복호화하여 확인한 후, HMAC을 사용해 메시지의 무결성을 검증합니다.
클라이언트와 서버는 서로 AES 암호화를 사용하여 안전하게 데이터를 주고받습니다.
양측은 서로의 암호화된 메시지를 검증하고, 정상적인 연결이 확립되면 데이터 통신을 시작합니다.


## 📁 파일 구조

```bash
/handshake-protocol
├── README.md           # 프로젝트 설명 파일
├── code/               # 클라이언트 및 서버 코드 폴더
│   ├── client.c        # 클라이언트 프로그램
│   ├── server.c        # 서버 프로그램
├── README.md           # code 폴더 설명 파일
└── src/                # 소스 코드 및 라이브러리
```


## ⚙️ 코드 설명
### 1. RSA 암호화
RSA_enc(): 메시지를 RSA 공개키로 암호화합니다.
RSA_dec(): 암호화된 메시지를 RSA 개인키로 복호화합니다.
RSA_sign(): 메시지에 디지털 서명을 추가합니다.
RSA_verify(): 디지털 서명을 검증합니다.

### 2. HMAC
HMAC는 SHA256 해시 함수와 결합되어 사용됩니다. 메시지의 무결성을 보장하며, 서버와 클라이언트가 동일한 키를 공유할 수 있도록 합니다.

### 3. AES 암호화
AES는 128비트 키를 사용하여 대칭키 암호화를 구현합니다. 안전한 데이터 전송을 위해 사용됩니다.

### 4. JSON 전송
데이터는 JSON 형식으로 서버와 클라이언트 간에 전송됩니다. json-c 라이브러리를 사용하여 JSON 객체를 생성하고 파싱합니다.

## 🔑 보안 검증
핸드쉐이크가 완료된 후, HMAC 검증을 통해 데이터의 무결성이 확인됩니다. 클라이언트와 서버는 각각 상대방의 메시지를 검증하여 안전한 연결을 보장합니다.
